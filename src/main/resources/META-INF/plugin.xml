<!-- Plugin Configuration File. Read more: https://plugins.jetbrains.com/docs/intellij/plugin-configuration-file.html -->
<idea-plugin>
    <!-- Unique identifier of the plugin. It should be FQN. It cannot be changed between the plugin versions. -->
    <id>com.vittoriomattei.ContextFetcher</id>

    <!-- Public plugin name should be written in Title Case.
         Guidelines: https://plugins.jetbrains.com/docs/marketplace/plugin-overview-page.html#plugin-name -->
    <name>ContextFetcher</name>

    <!-- A displayed Vendor name or Organization ID displayed on the Plugins Page. -->
    <vendor url="https://www.vittoriomattei.com">Vittorio Mattei</vendor>

    <!-- Description of the plugin displayed on the Plugin Page and IDE Plugin Manager.
         Guidelines: https://plugins.jetbrains.com/docs/marketplace/plugin-overview-page.html#plugin-description -->
    <description><![CDATA[
    Helper utility to fetch context to be fed to AI chats.<br>
    This plugin will help with selecting files, getting the context and copying it to any AI Chat.
  ]]></description>

    <!-- Product and plugin compatibility requirements.
         Read more: https://plugins.jetbrains.com/docs/intellij/plugin-compatibility.html -->
    <depends>com.intellij.modules.platform</depends>

    <!-- Extension points defined by the plugin.
         Read more: https://plugins.jetbrains.com/docs/intellij/plugin-extension-points.html -->
    <extensions defaultExtensionNs="com.intellij">
        <!-- Tool Window -->
        <toolWindow
                id="ContextAggregator"
                anchor="right"
                factoryClass="com.vittoriomattei.contextfetcher.ui.ContextFetcherToolWindowFactory"/>


        <!-- Project Service for File Management -->
        <projectService
                serviceInterface="com.vittoriomattei.contextfetcher.services.FileAggregatorService"
                serviceImplementation="com.vittoriomattei.contextfetcher.services.FileAggregatorServiceImpl"/>

        <projectService
                serviceImplementation="com.vittoriomattei.contextfetcher.services.ContextGeneratorService"/>


    </extensions>
    <actions>
        <action id="ContextAggregator.AddFile"
                class="com.vittoriomattei.contextfetcher.actions.AddFileAction"
                text="Add File to Context"
                description="Add the currently selected file or directory to context"
                icon="AllIcons.Actions.AddFile"/>

        <action id="ContextAggregator.AddOpenFiles"
                class="com.vittoriomattei.contextfetcher.actions.AddOpenFilesAction"
                text="Add All Open Files to Context"
                description="Add all currently open files to context"
                icon="AllIcons.Actions.AddList"/>

        <action id="ContextAggregator.AddSelectionAction"
                class="com.vittoriomattei.contextfetcher.actions.AddSelectionAction"
                text="Add Selection to Context"
                description="Adds selected lines or the current line to a custom context."/>

        <action id="ContextAggregator.GenerateContextOutput"
                class="com.vittoriomattei.contextfetcher.actions.GenerateContextAction"
                text="Generate Context Output"
                description="Generate formatted output of all files in context"
                icon="AllIcons.Toolwindows.ToolWindowRun"/>

        <action id="ContextAggregator.RemoveSelected"
                class="com.vittoriomattei.contextfetcher.actions.RemoveSelectedAction"
                text="Remove Selected"
                description="Remove selected files and snippets from context"
                icon="AllIcons.General.Remove"/>

        <action id="ContextAggregator.ClearAll"
                class="com.vittoriomattei.contextfetcher.actions.ClearAllAction"
                text="Clear All Context"
                description="Clears all files and snippets from context"
                icon="AllIcons.Actions.DeleteTag"/>
        <action id="ContextAggregator.AddMultipleFiles"
                class="com.vittoriomattei.contextfetcher.actions.AddRecentFilesAction"
                text="Add..."
                description="Add multiple files to context"
                icon="AllIcons.General.Add"/>
        <action id="ContextAggregator.ClearText"
                class="com.vittoriomattei.contextfetcher.actions.ClearGeneratedTextAction"
                text="Clear Text"
                description="Clears the generated context text"
                icon="AllIcons.Actions.ClearCash"
        />

        <action id="ContextAggregator.CopyToClipboard"
                class="com.vittoriomattei.contextfetcher.actions.CopyGeneratedToClipboardAction"
                text="Copy to Clipboard"
                description="Copies the generated context text to the clipboard"
                icon="AllIcons.Actions.Copy"/>


        <group id="ContextAggregator.ToolsMenuSubGroup" text="Context Fetcher" popup="true">
            <reference ref="ContextAggregator.AddFile"/>
            <reference ref="ContextAggregator.AddOpenFiles"/>
            <reference ref="ContextAggregator.AddSelectionAction"/>
            <add-to-group group-id="ToolsMenu" anchor="last"/>
        </group>

        <group id="ContextAggregator.EditorPopupSubGroup" text="Context Fetcher" popup="true">
            <reference ref="ContextAggregator.AddFile"/>
            <reference ref="ContextAggregator.AddSelectionAction"/>
            <add-to-group group-id="EditorPopupMenu" anchor="last"/>
        </group>

        <group id="ContextAggregator.TabMenu" popup="false">
            <reference ref="ContextAggregator.AddFile"/>
            <add-to-group group-id="EditorTabPopupMenu" anchor="last"/>
        </group>

        <group id="ContextAggregator.PaneMenu" popup="false">
            <reference ref="ContextAggregator.AddFile"/>
            <add-to-group group-id="ProjectViewPopupMenu" anchor="last"/>
        </group>

        <group id="ContextFetcher.MainToolbarGroup" text="ContextFetcher" popup="false">
            <reference ref="ContextAggregator.AddMultipleFiles"/>
            <reference ref="ContextAggregator.AddOpenFiles"/>
            <reference ref="ContextAggregator.ClearAll"/>
            <reference ref="ContextAggregator.RemoveSelected"/>
            <reference ref="ContextAggregator.GenerateContextOutput"/>
            <add-to-group group-id="MainToolBar" anchor="last"/>
        </group>

        <group id="ContextFetcher.GenerateContextToolbar" text="Generated Context Actions" popup="false">
            <reference ref="ContextAggregator.ClearText"/>
            <reference ref="ContextAggregator.CopyToClipboard"/>
        </group>

    </actions>
</idea-plugin>
